{% extends 'base.html' %}
{% block title %}Image Background Remover - Toolify{% endblock %}

{% block content %}
<style>
  body{background-color:#0a0a0a;color:#fff;font-family:'Segoe UI',sans-serif}.background-grid{position:fixed;top:0;left:0;width:100%;height:100%;background-image:linear-gradient(rgba(0,255,195,.05) 1px,transparent 1px),linear-gradient(to right,rgba(0,255,195,.05) 1px,transparent 1px);background-size:40px 40px;z-index:-2;animation:pan-grid 60s linear infinite}@keyframes pan-grid{from{background-position:0 0}to{background-position:400px 400px}}@keyframes aurora{0%{transform:translate(10%,10%) rotate(0)}50%{transform:translate(-10%,-10%) rotate(180deg)}100%{transform:translate(10%,10%) rotate(360deg)}}.tool-section{padding:60px 20px;display:flex;justify-content:center;align-items:center;min-height:80vh}.tool-wrapper{max-width:800px;width:100%;padding:40px;background:rgba(18,25,39,.6);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(0,255,195,.15);border-radius:20px;position:relative;overflow:hidden;z-index:1;transition:border-color .4s ease,box-shadow .4s ease}.tool-wrapper:hover{border-color:rgba(0,255,195,.4);box-shadow:0 0 25px rgba(0,255,195,.2)}.tool-wrapper::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at center,rgba(0,255,195,.1) 0,transparent 40%);animation:aurora 8s linear infinite;pointer-events:none;z-index:-1}.tool-title{font-size:2.5rem;text-align:center;color:#00ffc3;text-shadow:0 0 8px #00ffc3;margin-bottom:20px}.tool-description{text-align:center;font-size:1.1rem;margin-bottom:30px;color:#aaa}.upload-form{display:flex;flex-direction:column;gap:20px;align-items:center}.upload-btn-wrapper{position:relative;overflow:hidden;display:inline-block;cursor:pointer;padding:14px 25px;border-radius:50px;background:#00ffc3;color:#000;font-weight:700;transition:.3s ease}.upload-btn-wrapper input[type=file]{font-size:100px;position:absolute;left:0;top:0;opacity:0;cursor:pointer}.upload-btn-wrapper:hover{transform:scale(1.05)}.file-name{color:#00ffc3;margin-top:10px;font-weight:700}.process-btn{padding:14px;font-size:1.2rem;font-weight:700;border:none;border-radius:50px;background:#00ffc3;color:#000;cursor:pointer;transition:all .3s ease;box-shadow:0 0 10px #00ffc3,0 0 20px #00ffc3;width:60%;display:flex;justify-content:center;align-items:center;gap:10px}.process-btn:hover:not(:disabled){transform:scale(1.05);box-shadow:0 0 15px #00ffc3,0 0 30px #00ffc3}.process-btn:disabled{background:#555;color:#999;cursor:not-allowed;box-shadow:none}.spinner{width:20px;height:20px;border:3px solid rgba(0,0,0,.3);border-radius:50%;border-top-color:#000;animation:spin 1s ease-in-out infinite}@keyframes spin{to{transform:rotate(360deg)}}.output-box{margin-top:30px;padding:20px;border-radius:10px;background:rgba(0,255,195,.1);border:1px solid #00ffc3;text-align:center}.output-box.error{background:rgba(255,51,51,.1);border-color:#ff3333;color:#ffcccc}.output-image{max-width:100%;border-radius:10px;margin-bottom:20px}.download-link{display:inline-block;margin-top:15px;background:#00ffc3;color:#000;padding:10px 22px;border-radius:50px;font-weight:700;text-decoration:none;transition:all .3s ease}.download-link:hover{transform:scale(1.05)}
</style>

<div class="background-grid"></div>

<section class="tool-section">
  <div class="tool-wrapper">
    <h2 class="tool-title">üñºÔ∏è Image Background Remover</h2>
    <p class="tool-description">Upload any image and instantly get a version with a transparent background. Powered by AI.</p>
    
    <form method="POST" enctype="multipart/form-data" class="upload-form" id="uploadForm">
      <div class="upload-btn-wrapper">
        <button type="button" class="process-btn">Select Image</button>
        <input type="file" name="image" id="imageUpload" accept="image/png, image/jpeg, image/webp" required>
      </div>
      <span id="fileName" class="file-name">No file selected</span>
      
      <button type="submit" class="process-btn" id="processBtn">
        <span id="btn-text">Remove Background ‚ú®</span>
        <div class="spinner" id="spinner" style="display: none;"></div>
      </button>
    </form>

    {% if output_filename %}
    <div class="output-box">
      <h3 class="tool-title" style="font-size: 1.8rem; margin-bottom: 15px;">Success!</h3>
      <img src="{{ url_for('static', filename='converted/' + output_filename) }}" alt="Processed Image" class="output-image">
      <a href="{{ url_for('static', filename='converted/' + output_filename) }}" download class="download-link">‚¨áÔ∏è Download Image</a>
    </div>
    {% elif error %}
    <div class="output-box error">
        {{ error }}
    </div>
    {% endif %}
  </div>
</section>

<script>
  document.getElementById('imageUpload').addEventListener('change', function() {
    const fileName = this.files[0] ? this.files[0].name : 'No file selected';
    document.getElementById('fileName').textContent = fileName;
  });

  document.getElementById('uploadForm').addEventListener('submit', function() {
    document.getElementById('processBtn').disabled = true;
    document.getElementById('btn-text').textContent = 'Processing...';
    document.getElementById('spinner').style.display = 'block';
  });
</script>
{% endblock %}
